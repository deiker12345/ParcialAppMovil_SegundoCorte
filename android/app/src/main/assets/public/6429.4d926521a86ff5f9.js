"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6429],{5083:(z,I,v)=>{v.d(I,{E_:()=>H,F3:()=>A});var a=v(467),L=function(r){return r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE",r}(L||{});class x extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const F=r=>{const e=r.CapacitorCustomPlatform||null,t=r.Capacitor||{},i=t.Plugins=t.Plugins||{},s=()=>null!==e?e.name:(r=>{var e,t;return r?.androidBridge?"android":null!==(t=null===(e=r?.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(r),h=u=>{var f;return null===(f=t.PluginHeaders)||void 0===f?void 0:f.find(D=>D.name===u)},w=new Map;return t.convertFileSrc||(t.convertFileSrc=u=>u),t.getPlatform=s,t.handleError=u=>r.console.error(u),t.isNativePlatform=()=>"web"!==s(),t.isPluginAvailable=u=>{const f=w.get(u);return!(!f?.platforms.has(s())&&!h(u))},t.registerPlugin=(u,f={})=>{const D=w.get(u);if(D)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),D.proxy;const U=s(),T=h(u);let E;const Z=function(){var g=(0,a.A)(function*(){return!E&&U in f?E=E="function"==typeof f[U]?yield f[U]():f[U]:null!==e&&!E&&"web"in f&&(E=E="function"==typeof f.web?yield f.web():f.web),E});return function(){return g.apply(this,arguments)}}(),V=g=>{let m;const C=(...k)=>{const O=Z().then(b=>{const $=((g,m)=>{var C,k;if(!T){if(g)return null===(k=g[m])||void 0===k?void 0:k.bind(g);throw new x(`"${u}" plugin is not implemented on ${U}`,L.Unimplemented)}{const O=T?.methods.find(b=>m===b.name);if(O)return"promise"===O.rtype?b=>t.nativePromise(u,m.toString(),b):(b,$)=>t.nativeCallback(u,m.toString(),b,$);if(g)return null===(C=g[m])||void 0===C?void 0:C.bind(g)}})(b,g);if($){const W=$(...k);return m=W?.remove,W}throw new x(`"${u}.${g}()" is not implemented on ${U}`,L.Unimplemented)});return"addListener"===g&&(O.remove=(0,a.A)(function*(){return m()})),O};return C.toString=()=>`${g.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:g,writable:!1,configurable:!1}),C},G=V("addListener"),K=V("removeListener"),N=(g,m)=>{const C=G({eventName:g},m),k=function(){var b=(0,a.A)(function*(){const $=yield C;K({eventName:g,callbackId:$},m)});return function(){return b.apply(this,arguments)}}(),O=new Promise(b=>C.then(()=>b({remove:k})));return O.remove=(0,a.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield k()}),O},R=new Proxy({},{get(g,m){switch(m){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return T?N:G;case"removeListener":return K;default:return V(m)}}});return i[u]=R,w.set(u,{name:u,proxy:R,platforms:new Set([...Object.keys(f),...T?[U]:[]])}),R},t.Exception=x,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},P=(r=>r.Capacitor=F(r))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),A=P.registerPlugin;class H{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){var i=this;let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),s&&this.sendRetainedArgumentsForEvent(e);const h=function(){var w=(0,a.A)(function*(){return i.removeListener(e,t)});return function(){return w.apply(this,arguments)}}();return Promise.resolve({remove:h})}removeAllListeners(){var e=this;return(0,a.A)(function*(){e.listeners={};for(const t in e.windowListeners)e.removeWindowListener(e.windowListeners[t]);e.windowListeners={}})()}notifyListeners(e,t,i){const s=this.listeners[e];if(s)s.forEach(n=>n(t));else if(i){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!(null===(t=this.listeners[e])||void 0===t||!t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new P.Exception(e,L.Unimplemented)}unavailable(e="not available"){return new P.Exception(e,L.Unavailable)}removeListener(e,t){var i=this;return(0,a.A)(function*(){const s=i.listeners[e];if(!s)return;const n=s.indexOf(t);i.listeners[e].splice(n,1),i.listeners[e].length||i.removeWindowListener(i.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const o=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),d=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class y extends H{getCookies(){return(0,a.A)(function*(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[s,n]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=d(s).trim(),n=d(n).trim(),t[s]=n}),t})()}setCookie(e){return(0,a.A)(function*(){try{const t=o(e.key),i=o(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),l=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${s}; path=${n}; ${l};`}catch(t){return Promise.reject(t)}})()}deleteCookie(e){return(0,a.A)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,a.A)(function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,a.A)(function*(){try{yield e.clearCookies()}catch(t){return Promise.reject(t)}})()}}A("CapacitorCookies",{web:()=>new y});const _=function(){var r=(0,a.A)(function*(e){return new Promise((t,i)=>{const s=new FileReader;s.onload=()=>{const n=s.result;t(n.indexOf(",")>=0?n.split(",")[1]:n)},s.onerror=n=>i(n),s.readAsDataURL(e)})});return function(t){return r.apply(this,arguments)}}();class Y extends H{request(e){return(0,a.A)(function*(){const t=((r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),s=((r={})=>{const e=Object.keys(r);return Object.keys(r).map(s=>s.toLocaleLowerCase()).reduce((s,n,l)=>(s[n]=r[e[l]],s),{})})(r.headers)["content-type"]||"";if("string"==typeof r.data)t.body=r.data;else if(s.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[l,h]of Object.entries(r.data||{}))n.set(l,h);t.body=n.toString()}else if(s.includes("multipart/form-data")||r.data instanceof FormData){const n=new FormData;if(r.data instanceof FormData)r.data.forEach((h,p)=>{n.append(p,h)});else for(const h of Object.keys(r.data))n.append(h,r.data[h]);t.body=n;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(s.includes("application/json")||"object"==typeof r.data)&&(t.body=JSON.stringify(r.data));return t})(e,e.webFetchExtra),i=((r,e=!0)=>r?Object.entries(r).reduce((i,s)=>{const[n,l]=s;let h,p;return Array.isArray(l)?(p="",l.forEach(w=>{h=e?encodeURIComponent(w):w,p+=`${n}=${h}&`}),p.slice(0,-1)):(h=e?encodeURIComponent(l):l,p=`${n}=${h}`),`${i}&${p}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),s=i?`${e.url}?${i}`:e.url,n=yield fetch(s,t),l=n.headers.get("content-type")||"";let p,w,{responseType:h="text"}=n.ok?e:{};switch(l.includes("application/json")&&(h="json"),h){case"arraybuffer":case"blob":w=yield n.blob(),p=yield _(w);break;case"json":p=yield n.json();break;default:p=yield n.text()}const S={};return n.headers.forEach((u,f)=>{S[f]=u}),{data:p,headers:S,status:n.status,url:n.url}})()}get(e){var t=this;return(0,a.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var t=this;return(0,a.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var t=this;return(0,a.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var t=this;return(0,a.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var t=this;return(0,a.A)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}A("CapacitorHttp",{web:()=>new Y})},6429:(z,I,v)=>{v.d(I,{U:()=>B});var a=v(467),L=v(5083);const x=(0,L.F3)("MatchingPlugin",{web:()=>v.e(4018).then(v.bind(v,4018)).then(P=>new P.MatchingPluginWeb)}),M=(0,L.F3)("ChatPlugin",{web:()=>v.e(121).then(v.bind(v,121)).then(P=>new P.ChatPluginWeb)});var F=v(2615);let B=(()=>{var P;class A{constructor(){}openMatchingView(c,o){var d=this;return(0,a.A)(function*(){try{const y=d.convertToPluginProfiles(o);return yield x.openMatchingView({currentUserId:c,profiles:y})}catch(y){return console.error("Error opening matching view:",y),{action:"close"}}})()}updateMatchingProfiles(c){var o=this;return(0,a.A)(function*(){try{const d=o.convertToPluginProfiles(c);yield x.updateProfiles({profiles:d})}catch(d){throw console.error("Error updating matching profiles:",d),d}})()}closeMatchingView(){return(0,a.A)(function*(){try{yield x.closeMatchingView()}catch(c){throw console.error("Error closing matching view:",c),c}})()}openChatView(c,o,d){var y=this;return(0,a.A)(function*(){try{const j=y.convertToPluginMessages(d);return yield M.openChatView({chatId:c,currentUserId:"",otherUser:o,messages:j})}catch(j){throw console.error("Error opening native chat view:",j),j}})()}openChatList(c,o){return(0,a.A)(function*(){try{return yield M.openChatList({currentUserId:c,chats:o})}catch(d){throw console.error("Error opening chat list:",d),d}})()}updateChatMessages(c,o){var d=this;return(0,a.A)(function*(){try{const y=d.convertToPluginMessages(o);yield M.updateMessages({chatId:c,messages:y})}catch(y){throw console.error("Error updating chat messages:",y),y}})()}closeChatView(){return(0,a.A)(function*(){try{yield M.closeChatView()}catch(c){throw console.error("Error closing chat view:",c),c}})()}convertToPluginProfiles(c){return c.map(o=>({uid:o.uid||"",name:o.name,lastName:o.lastName||"",birthDate:o.birthDate.toISOString(),city:o.city||"",country:o.country||"",gender:o.gender,passions:o.passions?o.passions.map(d=>({category:d.category})):[],photos:o.photos||[]}))}convertToPluginChatUser(c){return{uid:c.uid||"",name:c.name,lastName:c.lastName||"",photo:c.photos?.[0]}}convertToPluginMessages(c){return c.map(o=>({id:o.id||"",senderId:o.senderId,text:o.text,timestamp:o.timestamp.getTime().toString(),type:o.type||"text"}))}static#e=P=()=>(this.\u0275fac=function(o){return new(o||A)},this.\u0275prov=F.jDH({token:A,factory:A.\u0275fac,providedIn:"root"}))}return P(),A})()}}]);